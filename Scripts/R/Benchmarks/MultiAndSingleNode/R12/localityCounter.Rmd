---
title: "R Notebook"
output: html_notebook
---


```{r}
library(tidyverse)

RESEARCH_HOME = "/home/and/Documents/PhD/Research"
lines = readLines(paste0(RESEARCH_HOME, "/Scripts/R/Benchmarks/MultiAndSingleNode/R12/dblab/monitor.txt"))
lines = lines[grepl("\\|TASKS\\|", lines)]
fields = c("Timestamp", "Title", "Time", "appID", "Nodes", "nodeID", "nodeIP", "Stage", "taskID", "Locality", "Launch", "Duration", "Input", "Status")
tasksInfo = as_tibble(lines) %>%
  separate(value, into=fields, sep="\\|") %>%
  separate(appID, into=c(NA, NA, "ID"), sep="-") %>%
  select(ID, taskID, Locality) %>%
  distinct() %>%
  #mutate(ID=factor(ID), taskID=factor(taskID), Locality=factor(Locality)) %>%
  group_by(ID, Locality) %>% tally()
head(tasksInfo, n=Inf)
```



```{r}
p = ggplot(data = tasksInfo, aes(x = ID, y = n, fill = Locality)) +
  geom_bar(stat="identity", width = 0.6) +
  labs(x = "application ID", y = "Count")
plot(p)
```

